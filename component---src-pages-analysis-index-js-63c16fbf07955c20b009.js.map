{"version":3,"file":"component---src-pages-analysis-index-js-63c16fbf07955c20b009.js","mappings":"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","sources":["webpack://tkfmtools/./node_modules/@babel/runtime/helpers/objectWithoutProperties.js","webpack://tkfmtools/./src/containers/Scrollable.js","webpack://tkfmtools/./src/data/charMap.js","webpack://tkfmtools/./src/data/charByPosition.js","webpack://tkfmtools/./src/pages/analysis/index.js","webpack://tkfmtools/./src/utils/calcCharStats.js"],"sourcesContent":["var objectWithoutPropertiesLoose = require(\"./objectWithoutPropertiesLoose.js\");\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutProperties;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","import styled from \"styled-components\";\r\n\r\nconst Scrollable = styled.div`\r\n  overflow: auto;\r\n  height: 100%;\r\n  scrollbar-width: thin;\r\n  padding-right: 0.5rem;\r\n  margin-right: -0.5rem;\r\n  &::-webkit-scrollbar {\r\n    width: 0.4rem;\r\n    height: 0.4rem;\r\n    background: ${(props) => props.theme.colors.surface};\r\n  }\r\n  &::-webkit-scrollbar-thumb {\r\n    background: ${(props) => props.theme.colors.border};\r\n    border-radius: 0.25rem;\r\n  }\r\n  &::-webkit-scrollbar-track {\r\n    background: ${(props) => props.theme.colors.surface};\r\n  }\r\n  &::-webkit-scrollbar-corner {\r\n    background: ${(props) => props.theme.colors.surface};\r\n  }\r\n`;\r\n\r\nexport default Scrollable;\r\n","const charData = require(\"./character.json\");\r\n\r\nconst charMap = charData.reduce((map, c) => {\r\n  const { id, ...rest } = c;\r\n  map[id] = rest;\r\n  return map;\r\n}, {});\r\n\r\nmodule.exports = charMap;\r\n","import charsData from \"data/character.json\";\r\n\r\nconst charByPosition = charsData.reduce(\r\n  (newData, c, i) => {\r\n    newData[c.tags.position - 5].push({ id: c.id, ind: i });\r\n    return newData;\r\n  },\r\n  [...Array(5)].map((i) => [])\r\n);\r\n\r\nexport default charByPosition;\r\n","import React, { useCallback, useEffect, useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Button, Grid } from \"@material-ui/core\";\r\nimport useCharacterSelect from \"hooks/useCharacterSelect\";\r\nimport { useLineupData } from \"containers/LineupDataProvider\";\r\nimport { useLanguage } from \"containers/LanguageProvider\";\r\nimport Head from \"components/Head\";\r\nimport ImageSupplier from \"components/ImageSupplier\";\r\nimport Input, { Select } from \"components/Input\";\r\nimport PotentialInput from \"components/PotentialInput\";\r\nimport Header from \"components/Header\";\r\nimport IconButton from \"components/IconButton\";\r\nimport { SaveIcon, LoadIcon, DeleteIcon } from \"components/icon\";\r\nimport Snackbar from \"components/Snackbar\";\r\nimport { ScrollableModal, TextModal } from \"components/Modal\";\r\nimport calcCharStats from \"utils/calcCharStats\";\r\nimport charByPositionData from \"data/charByPosition\";\r\n\r\nconst CharContainer = ({ index }) => {\r\n  const { pageString, charString } = useLanguage();\r\n\r\n  const { currentLineup, actions } = useLineupData();\r\n  const { setCurrentLineup } = actions;\r\n\r\n  const charState = currentLineup[index];\r\n\r\n  const onSelect = useCallback(\r\n    (newCharState) => {\r\n      const newLineup = Array.from(currentLineup);\r\n\r\n      newLineup[index] = {\r\n        ...newCharState,\r\n        ...calcCharStats(newCharState),\r\n        owned: newCharState.level !== 0,\r\n      };\r\n\r\n      setCurrentLineup(newLineup);\r\n    },\r\n    [currentLineup[index], setCurrentLineup]\r\n  );\r\n\r\n  const { selectItems, setSelect, setCharState } = useCharacterSelect(\r\n    charState,\r\n    onSelect\r\n  );\r\n\r\n  useEffect(() => {\r\n    setCharState(charState);\r\n  }, [charState]);\r\n\r\n  const handleBtnClick = useCallback(() => {\r\n    const newLineup = Array.from(currentLineup);\r\n\r\n    newLineup[index].owned = !newLineup[index].owned;\r\n\r\n    setCurrentLineup(newLineup);\r\n  }, [currentLineup[index], setCurrentLineup]);\r\n\r\n  const handleSelectChange = useCallback(\r\n    (key) => (event) => {\r\n      setSelect(key, parseInt(event.target.value));\r\n    },\r\n    [setSelect]\r\n  );\r\n\r\n  const handleSubChange = useCallback(\r\n    (index) => () => {\r\n      setSelect(\"potentialSub\", index);\r\n    },\r\n    [setSelect]\r\n  );\r\n\r\n  return (\r\n    <StyledCharContainer item xs={10} sm={6} md={5} lg={4}>\r\n      <CharImgWrapper\r\n        onClick={handleBtnClick}\r\n        $owned={charState.owned}\r\n        disableRipple\r\n        disableFocusRipple\r\n      >\r\n        <CharImg\r\n          name={`char_small_${charState.id}`}\r\n          alt={charString.name[charState.id]}\r\n        />\r\n      </CharImgWrapper>\r\n      <SelectGrid container spacing={1}>\r\n        <SelectWrapper item xs={6}>\r\n          <LevelInput\r\n            label={pageString.analysis.index.levelTitle}\r\n            value={charState.level}\r\n            onChange={handleSelectChange(\"level\")}\r\n            disabled={!charState.owned}\r\n            variant=\"outlined\"\r\n            size=\"small\"\r\n            margin=\"dense\"\r\n          />\r\n        </SelectWrapper>\r\n        <SelectWrapper item xs={6}>\r\n          <StyledSelect\r\n            label={pageString.analysis.index.disciplineTitle}\r\n            values={selectItems.discipline.values}\r\n            value={charState.id[0] === \"4\" ? \"-\" : charState.discipline}\r\n            onChange={handleSelectChange(\"discipline\")}\r\n            disabled={!charState.owned || charState.id[0] === \"4\"}\r\n            margin=\"dense\"\r\n          />\r\n        </SelectWrapper>\r\n        <SelectWrapper item xs={6}>\r\n          <StyledSelect\r\n            label={pageString.analysis.index.starTitle}\r\n            values={selectItems.star.values}\r\n            value={charState.star}\r\n            onChange={handleSelectChange(\"star\")}\r\n            disabled={!charState.owned}\r\n            margin=\"dense\"\r\n          />\r\n        </SelectWrapper>\r\n        <SelectWrapper item xs={6}>\r\n          <PotentialInput\r\n            charId={charState.id}\r\n            label={pageString.analysis.index.potentialTitle}\r\n            values={selectItems.potential.values}\r\n            mainValue={charState.potential}\r\n            subValue={charState.potentialSub}\r\n            onMainChange={handleSelectChange(\"potential\")}\r\n            onSubChange={handleSubChange}\r\n            disabled={!charState.owned}\r\n            margin=\"dense\"\r\n          />\r\n        </SelectWrapper>\r\n      </SelectGrid>\r\n    </StyledCharContainer>\r\n  );\r\n};\r\n\r\nconst StyledCharContainer = styled(Grid)`\r\n  display: flex;\r\n  flex-direction: row;\r\n  margin-bottom: 2rem;\r\n  margin-right: 2rem;\r\n  && {\r\n    max-width: 30rem;\r\n  }\r\n`;\r\nconst CharImgWrapper = styled(Button)`\r\n  ${(props) => (props.$owned ? null : \"filter: grayscale(100%);\")}\r\n  && {\r\n    transition: filter 0.1s ease;\r\n  }\r\n`;\r\nconst CharImg = styled(ImageSupplier)`\r\n  width: 7rem;\r\n  height: 7rem;\r\n`;\r\nconst LevelInput = styled(Input)`\r\n  && {\r\n    input {\r\n      padding: 0.6rem 1rem;\r\n    }\r\n    color: ${(props) =>\r\n      props.disabled ? props.theme.colors.dropdownHover : \"inherit\"};\r\n  }\r\n`;\r\nconst StyledSelect = styled(Select)`\r\n  && {\r\n    width: 100%;\r\n    > div > div {\r\n      padding: 0.6rem 1rem;\r\n      padding-right: 2rem;\r\n      color: ${(props) =>\r\n        props.disabled ? props.theme.colors.dropdownHover : \"inherit\"};\r\n    }\r\n    svg {\r\n      fill: ${(props) =>\r\n        props.disabled\r\n          ? props.theme.colors.dropdownHover\r\n          : props.theme.colors.onSurface};\r\n    }\r\n  }\r\n`;\r\nconst SelectGrid = styled(Grid)`\r\n  align-content: center;\r\n`;\r\nconst SelectWrapper = styled(Grid)`\r\n  height: 40%;\r\n`;\r\n\r\nconst DataManageButtons = ({ handleData, handleModalOpen }) => {\r\n  const { pageString } = useLanguage();\r\n\r\n  return (\r\n    <DataButtonContainer>\r\n      <IconButton\r\n        onClick={handleData(\"save\")}\r\n        tooltipText={pageString.analysis.index.saveButton}\r\n      >\r\n        {SaveIcon}\r\n      </IconButton>\r\n      <IconButton\r\n        onClick={handleModalOpen}\r\n        tooltipText={pageString.analysis.index.loadButton}\r\n      >\r\n        {LoadIcon}\r\n      </IconButton>\r\n    </DataButtonContainer>\r\n  );\r\n};\r\n\r\nconst DataButtonContainer = styled.div`\r\n  position: absolute;\r\n  right: 0;\r\n  top: -4rem;\r\n  margin-bottom: 0;\r\n  > span:last-child button {\r\n    margin: 0;\r\n  }\r\n`;\r\n\r\nconst DataModal = ({ handleData }) => {\r\n  const { pageString } = useLanguage();\r\n\r\n  const { localLineups } = useLineupData();\r\n\r\n  if (!localLineups) {\r\n    return null;\r\n  }\r\n\r\n  return localLineups.map((d, ind) => (\r\n    <Header\r\n      title={d.date}\r\n      end={\r\n        <>\r\n          <IconButton\r\n            onClick={handleData(\"load\", ind)}\r\n            tooltipText={pageString.analysis.index.loadButton}\r\n          >\r\n            {LoadIcon}\r\n          </IconButton>\r\n          <IconButton\r\n            onClick={handleData(\"delete\", ind)}\r\n            tooltipText={pageString.analysis.index.deleteButton}\r\n          >\r\n            {DeleteIcon}\r\n          </IconButton>\r\n        </>\r\n      }\r\n      key={ind}\r\n    />\r\n  ));\r\n};\r\n\r\nconst Index = () => {\r\n  const { pageString, charString } = useLanguage();\r\n\r\n  const { currentLineup, actions } = useLineupData();\r\n  const { pushLineup, getLineup, deleteLineup, setCurrentLineup } = actions;\r\n\r\n  const [state, setState] = useState({\r\n    isDataModalOpen: false,\r\n    isHelpModalOpen: false,\r\n    isSuccessSnackbarOpen: false,\r\n    isErrorSnackbarOpen: false,\r\n  });\r\n\r\n  const handleData = (action, ind) => () => {\r\n    switch (action) {\r\n      case \"save\":\r\n        if (pushLineup(currentLineup, { firebase: true })) {\r\n          setState((state) => ({ ...state, isSuccessSnackbarOpen: true }));\r\n\r\n          return;\r\n        }\r\n\r\n      case \"load\":\r\n        const loadedData = getLineup(ind);\r\n        if (loadedData) {\r\n          setState((state) => ({\r\n            ...state,\r\n            isSuccessSnackbarOpen: true,\r\n            isDataModalOpen: false,\r\n          }));\r\n\r\n          setCurrentLineup(loadedData);\r\n\r\n          return;\r\n        }\r\n\r\n      case \"delete\":\r\n        if (deleteLineup(ind)) {\r\n          setState((state) => ({\r\n            ...state,\r\n            isDataModalOpen: true,\r\n          }));\r\n\r\n          return;\r\n        }\r\n\r\n      default:\r\n        break;\r\n    }\r\n\r\n    setState((state) => ({\r\n      ...state,\r\n      isErrorSnackbarOpen: true,\r\n    }));\r\n  };\r\n\r\n  const handleSuccessSnackbarClose = () => {\r\n    setState((state) => ({ ...state, isSuccessSnackbarOpen: false }));\r\n  };\r\n\r\n  const handleErrorSnackbarClose = () => {\r\n    setState((state) => ({ ...state, isErrorSnackbarOpen: false }));\r\n  };\r\n\r\n  const handleDataModal = (boolean) => () => {\r\n    setState((state) => ({ ...state, isDataModalOpen: boolean }));\r\n  };\r\n\r\n  const handleHelpModal = (boolean) => () => {\r\n    setState((state) => ({ ...state, isHelpModalOpen: boolean }));\r\n  };\r\n\r\n  const positionImg = [\r\n    \"attacker\",\r\n    \"defender\",\r\n    \"healer\",\r\n    \"obsructer\",\r\n    \"supporter\",\r\n  ];\r\n\r\n  return (\r\n    <CharGroupsContainer>\r\n      <Head\r\n        title={pageString.analysis.index.helmet.title}\r\n        description={pageString.analysis.index.helmet.description}\r\n        path=\"/analysis/\"\r\n      />\r\n      <DataManageButtons\r\n        handleData={handleData}\r\n        handleModalOpen={handleDataModal(true)}\r\n      />\r\n      {charByPositionData.map((group, ind) => (\r\n        <React.Fragment key={ind}>\r\n          <Header\r\n            title={charString.tags[ind + 5]}\r\n            titleIcon={\r\n              <PositionImgWrapper name={`ui_${positionImg[ind]}`} alt=\"\" />\r\n            }\r\n            withHelp={ind === 0}\r\n            onClickHelp={handleHelpModal(true)}\r\n            border\r\n          />\r\n          <Grid container spacing={2}>\r\n            {group.map((c) => (\r\n              <CharContainer index={c.ind} key={c.id} />\r\n            ))}\r\n          </Grid>\r\n        </React.Fragment>\r\n      ))}\r\n      <Snackbar\r\n        open={state.isSuccessSnackbarOpen}\r\n        onClose={handleSuccessSnackbarClose}\r\n        message={pageString.analysis.index.successMsg}\r\n        type=\"success\"\r\n      />\r\n      <Snackbar\r\n        open={state.isErrorSnackbarOpen}\r\n        onClose={handleErrorSnackbarClose}\r\n        message={pageString.analysis.index.errorMsg}\r\n        type=\"error\"\r\n      />\r\n      <ScrollableModal\r\n        title={pageString.analysis.index.modalTitle}\r\n        open={state.isDataModalOpen}\r\n        onClose={handleDataModal(false)}\r\n        ariaLabelledby=\"data-operation-modal-title\"\r\n        ariaDescribedby=\"data-operation-modal-description\"\r\n      >\r\n        <DataModal handleData={handleData} />\r\n      </ScrollableModal>\r\n      <TextModal\r\n        title={pageString.analysis.index.helpModal.title}\r\n        content={pageString.analysis.index.helpModal.content}\r\n        open={state.isHelpModalOpen}\r\n        onClose={handleHelpModal(false)}\r\n        ariaLabelledby=\"help-modal-title\"\r\n        ariaDescribedby=\"help-modal-description\"\r\n      />\r\n    </CharGroupsContainer>\r\n  );\r\n};\r\n\r\nconst CharGroupsContainer = styled.div`\r\n  width: 100%;\r\n  > div:nth-child(even) > div > span {\r\n    display: flex;\r\n    align-items: center;\r\n    margin-bottom: 0.4rem;\r\n  }\r\n  > div:nth-child(2) > div {\r\n    width: 100%;\r\n    justify-content: space-between;\r\n  }\r\n`;\r\nconst PositionImgWrapper = styled(ImageSupplier)`\r\n  width: 2rem;\r\n  margin-right: 0.2rem;\r\n`;\r\n\r\nexport default Index;\r\n","const charData = require(\"../data/character.json\");\r\nconst potentialData = require(\"../data/potential.json\");\r\n\r\nconst calcCharPotential = (id, from, to, potentialType) => {\r\n  const result = {\r\n    items: {},\r\n    money: 0,\r\n    buff: { ATK: 0, HP: 0, PASSIVE: 0 },\r\n  };\r\n\r\n  if (from[0] > to[0]) {\r\n    return result;\r\n  }\r\n\r\n  const type =\r\n    id === \"nr\" || id[0] === \"4\" || id[0] === \"3\"\r\n      ? 3\r\n      : potentialType !== undefined\r\n      ? potentialType\r\n      : charData.find((c) => c.id === id).potentialType;\r\n\r\n  const stages = potentialData.type[type];\r\n  for (let i = from[0] - 1; i < to[0] - 1 + 1; i++) {\r\n    let stage = stages[i];\r\n    for (\r\n      let j = i === from[0] - 1 ? from[1] - 1 : 0;\r\n      j < (i === to[0] - 1 ? to[1] : 6);\r\n      j++\r\n    ) {\r\n      if (j < 0) continue;\r\n\r\n      let id = stage.pattern[j] + stage.rank[j];\r\n      if (result.items[id]) {\r\n        result.items[id] += stage.num[j];\r\n      } else {\r\n        result.items[id] = stage.num[j];\r\n      }\r\n      result.money += (i + 1) * 8000;\r\n      let buff = potentialData.itemMap[stage.pattern[j]].type;\r\n      result.buff[buff] += stage.buff[j];\r\n    }\r\n  }\r\n  // parse result\r\n  let parsedItem = {};\r\n  for (const [key, value] of Object.entries(result.items)) {\r\n    let itemId = potentialData.itemMap[key[0]].id.map((id) =>\r\n      key[1] === \"9\"\r\n        ? \"902\"\r\n        : key[1] === \"8\"\r\n        ? \"901\"\r\n        : (parseInt(key[1]) * 100 + id).toString()\r\n    );\r\n    for (let i of itemId) {\r\n      if (parsedItem[i]) {\r\n        parsedItem[i] += value;\r\n      } else {\r\n        parsedItem[i] = value;\r\n      }\r\n    }\r\n  }\r\n\r\n  result.items = parsedItem;\r\n  return result;\r\n};\r\n\r\nconst calcCharStats = ({\r\n  id,\r\n  level,\r\n  potential,\r\n  potentialSub,\r\n  discipline,\r\n  star,\r\n}) => {\r\n  const characterData = charData.find((c) => c.id === id);\r\n  if (!characterData) {\r\n    throw new Error(`invalid character id: ${id}`);\r\n  }\r\n  if ((id[0] === \"3\" || id[0] === \"4\") && potential > 6) {\r\n    throw new Error(`invalid potential: ${potential}`);\r\n  }\r\n  if (id[0] === \"4\" && +discipline > 0) {\r\n    throw new Error(`invalid discipline: ${discipline}`);\r\n  }\r\n\r\n  const { initATK, initHP } = characterData.stats;\r\n\r\n  const levelBuff = 1.1 ** (level - 1);\r\n\r\n  // deal with legacy data\r\n  let validPotentialSub = potentialSub;\r\n  if (typeof potentialSub !== \"object\") {\r\n    validPotentialSub = [...Array(6).keys()].map((i) => i < potentialSub);\r\n  }\r\n\r\n  const buff = validPotentialSub.reduce((res, boolean, i) => {\r\n    if (boolean) {\r\n      const newRes = calcCharPotential(\r\n        id,\r\n        [potential, i + 1],\r\n        [potential, i + 1]\r\n      ).buff;\r\n      res.ATK += newRes.ATK;\r\n      res.HP += newRes.HP;\r\n    }\r\n    return res;\r\n  }, calcCharPotential(id, [1, 0], [potential - 1, 6]).buff);\r\n\r\n  const disciplineBuff =\r\n    1 +\r\n    (isNaN(parseInt(discipline)) ? 0 : +discipline * (+discipline + 1) * 0.025);\r\n  const starBuff = (star + 5) / (9 - id[0]);\r\n\r\n  return {\r\n    ATK: Math.floor(\r\n      initATK * levelBuff * (1 + buff.ATK / 100) * disciplineBuff * starBuff\r\n    ),\r\n    HP: Math.floor(\r\n      initHP * levelBuff * (1 + buff.HP / 100) * disciplineBuff * starBuff\r\n    ),\r\n  };\r\n};\r\n\r\nmodule.exports = calcCharStats;\r\nmodule.exports.calcCharPotential = calcCharPotential;\r\n"],"names":["objectWithoutPropertiesLoose","module","exports","source","excluded","key","i","target","Object","getOwnPropertySymbols","sourceSymbolKeys","length","indexOf","prototype","propertyIsEnumerable","call","__esModule","Scrollable","styled","props","theme","colors","surface","border","charMap","require","reduce","map","c","id","rest","charsData","newData","tags","position","push","ind","Array","CharContainer","index","pageString","charString","useLanguage","currentLineup","actions","useLineupData","setCurrentLineup","charState","onSelect","useCallback","newCharState","newLineup","from","calcCharStats","owned","level","selectItems","setSelect","setCharState","useCharacterSelect","useEffect","handleBtnClick","handleSelectChange","event","parseInt","value","handleSubChange","StyledCharContainer","item","xs","sm","md","lg","CharImgWrapper","onClick","$owned","disableRipple","disableFocusRipple","CharImg","name","alt","SelectGrid","container","spacing","SelectWrapper","LevelInput","label","analysis","levelTitle","onChange","disabled","variant","size","margin","StyledSelect","disciplineTitle","values","discipline","starTitle","star","PotentialInput","charId","potentialTitle","potential","mainValue","subValue","potentialSub","onMainChange","onSubChange","Grid","Button","ImageSupplier","Input","dropdownHover","Select","onSurface","DataManageButtons","handleData","handleModalOpen","DataButtonContainer","IconButton","tooltipText","saveButton","SaveIcon","loadButton","LoadIcon","DataModal","localLineups","d","Header","title","date","end","deleteButton","DeleteIcon","CharGroupsContainer","PositionImgWrapper","pushLineup","getLineup","deleteLineup","state","setState","useState","isDataModalOpen","isHelpModalOpen","isSuccessSnackbarOpen","isErrorSnackbarOpen","action","firebase","loadedData","handleDataModal","boolean","handleHelpModal","positionImg","Head","helmet","description","path","charByPositionData","group","titleIcon","withHelp","onClickHelp","Snackbar","open","onClose","message","successMsg","type","errorMsg","modalTitle","ariaLabelledby","ariaDescribedby","helpModal","content","charData","potentialData","calcCharPotential","to","potentialType","result","items","money","buff","ATK","HP","PASSIVE","undefined","find","stages","stage","j","pattern","rank","num","itemMap","parsedItem","itemId","toString","entries","characterData","Error","initATK","initHP","stats","levelBuff","validPotentialSub","keys","res","newRes","disciplineBuff","isNaN","starBuff","Math","floor"],"sourceRoot":""}