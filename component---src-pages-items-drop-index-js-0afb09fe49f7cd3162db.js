"use strict";(self.webpackChunktkfmtools=self.webpackChunktkfmtools||[]).push([[886],{74772:function(e,t,r){r.d(t,{Q:function(){return c},qg:function(){return m},cP:function(){return p}});var a=r(67294),n=r(80366),i=r(42857),o=r(93175),l=r(95167),c=e=>{var{children:t,className:r,imgType:n,imgId:i,alt:o,isBackground:l}=e;return l?a.createElement(d,{className:r,name:n+"_"+i,isBackground:!0,alt:o},t):a.createElement(s,{className:r},a.createElement(d,{name:n+"_"+i,alt:o}),t)},d=(0,n.default)(o.Z).withConfig({displayName:"Card__StyledImg",componentId:"sc-1duszqx-0"})(["display:flex;justify-content:center;align-items:center;width:100%;background-repeat:no-repeat;"]),s=n.default.div.withConfig({displayName:"Card__ImgWrapper",componentId:"sc-1duszqx-1"})(["display:flex;align-items:center;justify-content:center;"]),m=e=>{var{className:t,id:r}=e,{itemString:n}=(0,i.f)();return a.createElement(g,{className:t,imgType:"item",imgId:r,alt:""},a.createElement(u,null,n.name[r]))},g=(0,n.default)(c).withConfig({displayName:"Card__ItemImg",componentId:"sc-1duszqx-2"})(["> div:first-child{width:2.5rem;height:2.5rem;margin-right:0.4rem;user-select:none;}"]),u=n.default.div.withConfig({displayName:"Card__TextWrapper",componentId:"sc-1duszqx-3"})(["white-space:nowrap;font-size:medium;font-weight:normal;"]),p=e=>{var{className:t,children:r,striped:n}=e;return a.createElement(y,{className:t,$striped:n},r)},y=(0,n.default)(l.Z).withConfig({displayName:"Card__StyledTable",componentId:"sc-1duszqx-4"})([".MuiTableCell-root{font-size:0.9rem;padding:0.3rem;padding-left:0.75rem;}"])},772:function(e,t,r){var a=r(67294),n=e=>{var{data:t,scrollTop:r,wrapperHeight:a,findItemIndex:n,overseen:i}=e,o=r+a,l=Math.max(n(r)-i,0),c=Math.min(n(o)+i,t.length-1);return Array.from({length:c-l+1},((e,t)=>t+l))};t.Z=e=>{var t,r,{data:i,findItemIndex:o,overseen:l}=e,c=(0,a.useRef)(),d=null!==(t=null==c||null===(r=c.current)||void 0===r?void 0:r.getBoundingClientRect().height)&&void 0!==t?t:0,{0:s,1:m}=(0,a.useState)(0),{0:g,1:u}=(0,a.useState)((()=>n({data:i,scrollTop:s,wrapperHeight:d,findItemIndex:o,overseen:l})));(0,a.useEffect)((()=>{u(n({data:i,scrollTop:s,wrapperHeight:d,findItemIndex:o,overseen:l}))}),[i,s,d,o,l]);return{renderIndices:g,wrapperRef:c,handleScroll:e=>{var{target:t}=e;m(t.scrollTop)}}}},7818:function(e,t,r){r.r(t),r.d(t,{default:function(){return ae}});var a=r(4942),n=r(45987),i=r(67294),o=r(80366),l=r(17708),c=r(33182),d=r(70943),s=r(43521),m=r(42857),g=r(24069),u=r(59882),p=r(57783),y=r(32159),h=r(772),f=r(50033),k=r(95167),v=e=>{var{data:t,itemsPosition:r,headHeight:a,renderIndices:n,renderRow:o}=e;return n.slice(-1)[0]>=t.length||0===t.length?null:i.createElement(i.Fragment,null,n[0]>0?i.createElement(E,{$height:r[n[0]-1]-a,key:t[0].id}):null,n.map((e=>i.createElement(i.Fragment,{key:t[e].id},o(t[e])))))},w=o.default.div.withConfig({displayName:"VariableHeightWindowTable__Sizer",componentId:"sc-1m1o1xu-0"})(["height:","px;th,td{white-space:nowrap;}"],(e=>{var{$height:t}=e;return t})),E=o.default.tr.withConfig({displayName:"VariableHeightWindowTable__VirtualRow",componentId:"sc-1m1o1xu-1"})(["height:","px;"],(e=>{var{$height:t}=e;return t})),I=e=>{var{className:t,head:r,headHeight:a,renderRow:n,data:o,overseen:l=5,sortFunc:c,defaultSortKey:d,striped:s,border:m}=e,{sortedData:g,requestSort:u,getSortDirection:E}=(0,y.Z)(o,c,{key:d,direction:"desc"}),{sizerHeight:I,itemsPosition:b}=(0,i.useMemo)((()=>((e,t)=>{for(var r=Array(e.length),a=0;a<e.length;a++){var n;r[a]=(null!==(n=r[a-1])&&void 0!==n?n:t)+e[a].height}return{sizerHeight:r.slice(-1)[0],itemsPosition:r}})(g,a)),[g,a]),x=(0,i.useCallback)((e=>((e,t)=>{for(var r=0,a=e.length;r<a;){var n=r+a>>>1;e[n]<t?r=n+1:a=n}return r})(b,e)),[b]),{renderIndices:C,wrapperRef:_,handleScroll:S}=(0,h.Z)({data:g,findItemIndex:x,overseen:l});return i.createElement(f.Z,{className:t,onScroll:S,ref:_},i.createElement(w,{$height:I},i.createElement(k.Z,{stickyHeader:!0,$striped:s,$border:m,size:"small"},i.cloneElement(r,{requestSort:u,getSortDirection:E}),i.createElement(p.Z,null,i.createElement(v,{data:g,itemsPosition:b,headHeight:a,renderIndices:C,renderRow:n})))))},b=r(74772),x=r(4389),C=r(22776),_=r(25072),S=r(40122),N=r(28437),O=r(96154),Z=JSON.parse('{"101":{"rank":1,"category":0},"102":{"rank":1,"category":0},"103":{"rank":1,"category":0},"104":{"rank":1,"category":0},"105":{"rank":1,"category":0},"201":{"rank":2,"category":0},"202":{"rank":2,"category":0},"203":{"rank":2,"category":0},"204":{"rank":2,"category":0},"205":{"rank":2,"category":0},"301":{"rank":3,"category":0},"302":{"rank":3,"category":0},"303":{"rank":3,"category":0},"304":{"rank":3,"category":0},"305":{"rank":3,"category":0},"401":{"rank":4,"category":0},"402":{"rank":4,"category":0},"403":{"rank":4,"category":0},"404":{"rank":4,"category":0},"405":{"rank":4,"category":0},"406":{"rank":4,"category":0},"407":{"rank":4,"category":0},"408":{"rank":4,"category":0},"409":{"rank":4,"category":0},"410":{"rank":4,"category":0},"501":{"rank":5,"category":0},"502":{"rank":5,"category":0},"503":{"rank":5,"category":0},"504":{"rank":5,"category":0},"505":{"rank":5,"category":0},"506":{"rank":5,"category":0},"507":{"rank":5,"category":0},"508":{"rank":5,"category":0},"509":{"rank":5,"category":0},"510":{"rank":5,"category":0},"601":{"rank":1,"category":1},"602":{"rank":1,"category":1},"603":{"rank":1,"category":1},"604":{"rank":1,"category":1},"605":{"rank":1,"category":1},"701":{"rank":2,"category":1},"702":{"rank":2,"category":1},"703":{"rank":2,"category":1},"704":{"rank":2,"category":1},"705":{"rank":2,"category":1},"801":{"rank":1,"category":2},"802":{"rank":2,"category":2},"803":{"rank":3,"category":2},"901":{"rank":1,"category":3},"902":{"rank":2,"category":3}}'),P=["isModalOpen","onClose","filterBy"],j=["materials","trainItems","expPotions"],T=["dropData"];function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var H=e=>{var{column:t,requestSort:r,getSortDirection:a}=e,{pageString:n}=(0,m.f)();return i.createElement(l.Z,null,i.createElement(c.Z,null,Object.entries(n.items.drop.index.tableHead).map(((e,n)=>{var[o,l]=e,c="stage"===o||"energy"===o;return 0===n||t.includes(n-1)?i.createElement(z,{onClick:c?()=>r(o):null,direction:c?a(o):null,key:l,$sortable:c},l):null}))))},z=(0,o.default)(u.Re).withConfig({displayName:"drop__StyledTh",componentId:"sc-115hswd-0"})(["&&{background-color:",";color:",";","}"],(e=>{var{theme:t}=e;return t.colors.secondary}),(e=>{var{theme:t}=e;return t.colors.onSecondary}),(e=>{var{$sortable:t}=e;return t?"":"cursor: default;"})),$=e=>{var{items:t,rarity:r,rank:a}=e,{itemString:n}=(0,m.f)();return i.createElement(d.Z,null,i.createElement(q,null,t&&0!==t.length&&t.map((e=>i.createElement(M,{key:e.id},i.createElement(b.qg,{id:e.id}),i.createElement(R,{$rarity:e.rarity,label:n.rarity[e.rarity]}))))))},q=o.default.div.withConfig({displayName:"drop__ItemsContainer",componentId:"sc-115hswd-1"})(["display:flex;flex-direction:column;justify-content:center;> div:last-child{margin:0;}"]),M=o.default.div.withConfig({displayName:"drop__ItemWrapper",componentId:"sc-115hswd-2"})(["display:flex;align-items:center;flex-wrap:nowrap;margin-right:0.8rem;div{flex-wrap:nowrap;font-size:1rem;}"]),R=(0,o.default)(x.qc).withConfig({displayName:"drop__StyledChip",componentId:"sc-115hswd-3"})(["&&{margin-left:0.4rem;background-color:",";color:black;font-size:0.875rem;}"],(e=>{var{$rarity:t}=e;return 0===t?"lightgray":1===t?"#90CAF9":2===t?"#A5D6A7":"#FFAB91"})),F=e=>{var{item:t,column:r,rarity:a,rank:n}=e,{chapter:o,stage:l,energy:s,materials:m,trainItems:g,expPotions:u}=t;return i.createElement(c.Z,null,i.createElement(d.Z,null,o+"-"+l),Object.values([m,g,u]).map(((e,t)=>e&&r.includes(t)&&i.createElement($,{items:e,rarity:a,rank:n,key:t}))),r.includes(3)&&i.createElement(d.Z,null,s))},W=e=>{var{filterBtnValue:t,filterBy:r,groupValues:a,strings:n}=e,{userLanguage:o}=(0,m.f)();return i.createElement(A,null,i.createElement(V,{title:n.title,border:!0}),i.createElement(S.Z,{value:t,onChange:r,$lang:o,$type:"ITEM_DROPS_TABLE"},a.map(((e,t)=>i.createElement(L,{value:e,key:t},n.button[t])))))},A=o.default.div.withConfig({displayName:"drop__StyledContainer",componentId:"sc-115hswd-4"})(["padding:0.2rem;"]),V=(0,o.default)(_.Z).withConfig({displayName:"drop__StyledHeader",componentId:"sc-115hswd-5"})(["margin-top:1rem;"]),L=(0,o.default)(S.C).withConfig({displayName:"drop__StyledToggleButton",componentId:"sc-115hswd-6"})(["&&&{padding:0.25rem 0.15rem;}"]),K=e=>{var{isModalOpen:t,onClose:r,filterBy:a}=e,o=(0,n.Z)(e,P),{pageString:l}=(0,m.f)();return i.createElement(Q,{title:l.items.drop.index.settingModal.title,open:t,onClose:r,ariaLabelledby:"setting-modal-title"},Object.entries(G).map(((e,t)=>{var[r,n]=e;return i.createElement(W,{groupValues:n,filterBtnValue:o[r],filterBy:a(r),strings:l.items.drop.index.settingModal.content[t],key:t})})))},Q=(0,o.default)(C.WQ).withConfig({displayName:"drop__StyledModal",componentId:"sc-115hswd-7"})(["> div:nth-child(3){top:20%;width:30%;@media screen and (max-width:1300px){width:40%;}@media screen and (max-width:992px){width:60%;}@media screen and (max-width:768px){width:90%;}> div:last-child > div:first-child > div{margin-top:0;}}"]),J=e=>{var{pageString:t}=(0,m.f)(),{0:r,1:a}=(0,i.useState)(!1),n=e=>()=>a(e);return i.createElement(i.Fragment,null,i.createElement(Y,null,i.createElement(g.ZP,{onClick:n(!0),tooltipText:t.items.drop.index.settingTooltip},N.qY)),i.createElement(K,Object.assign({},e,{isModalOpen:r,onClose:n(!1)})))},Y=o.default.div.withConfig({displayName:"drop__SettingButtonWrapper",componentId:"sc-115hswd-8"})(["position absolute;right:0;top:-4rem;"]),G={column:[0,1,2,3],rank:[1,2,3,4],rarity:[0,1,2,3]},U=e=>1e3*parseInt(e.chapter)+10*parseInt(e.stage.split(" ")[0])+(e.stage.includes("free")?1:0)+(e.stage.includes("-")?parseInt(e.stage.split("-")[1]):0),X=(e,t)=>{e.sort(((e,r)=>{var a,n;return"stage"===t.key?(a=U(e),n=U(r)):(a=e[t.key],n=r[t.key]),a<n?"asc"===t.direction?-1:1:a>n?"asc"===t.direction?1:-1:0}))},ee=[].concat(...O.map((e=>e.stages.map((t=>B({chapter:e.chapter},t)))))),te=(e,t)=>{for(var{column:r,rank:a,rarity:i}=e,o=[],l=e=>i.includes(e.rarity)&&a.includes(Z[e.id].rank),c=0;c<ee.length;c++){var d=ee[c],{materials:s,trainItems:m,expPotions:g}=d,u=(0,n.Z)(d,j),p=r.includes(0)?s.filter(l):[],y=r.includes(1)?m.filter(l):[],h=r.includes(2)?g.filter(l):[];if(p.length>0||y.length>0||h.length>0){var f=Math.max(p.length,y.length,h.length);o.push(B(B({},u),{},{id:u.chapter+"-"+u.stage,materials:p,trainItems:y,expPotions:h,height:40*(t>490?1:.9)*f+13}))}}return o},re=(0,o.default)(I).withConfig({displayName:"drop__ItemTable",componentId:"sc-115hswd-9"})(["overflow-x:auto;height:calc(100vh - 11rem);padding-right:0;margin-right:0;table{text-align:center;}"]),ae=()=>{var e="undefined"!=typeof window&&window.innerWidth<600?[0]:G.column,[t,r]=(0,s.Z)(),{0:a,1:o}=(0,i.useState)((()=>B(B({},G),{},{column:e,dropData:te({column:e,rank:G.rank,rarity:G.rarity},t)})));return(0,i.useEffect)((()=>{if(0!==t){var{dropData:e}=a,r=(0,n.Z)(a,T),i=te(r,t);o(B(B({},r),{},{dropData:i}))}}),[t]),i.createElement(i.Fragment,null,i.createElement(J,{column:a.column,rank:a.rank,rarity:a.rarity,filterBy:e=>(r,n)=>{var{column:i,rank:l,rarity:c}=a,d={column:i,rank:l,rarity:c};d[e]=n;var s=te(d,t);o((e=>B(B({},d),{},{dropData:s})))}}),i.createElement(re,{data:a.dropData,head:i.createElement(H,{column:a.column}),headHeight:48*(t>490?1:.9)+1,renderRow:e=>i.createElement(F,{item:e,column:a.column,rarity:a.rarity,rank:a.rank}),overseen:10,sortFunc:X,defaultSortKey:"stage",border:!0}))}}}]);
//# sourceMappingURL=component---src-pages-items-drop-index-js-0afb09fe49f7cd3162db.js.map