"use strict";(self.webpackChunktkfmtools=self.webpackChunktkfmtools||[]).push([[302],{24452:function(e,t,r){var a=r(67294),n=r(50009),l=r(50033),i=r(42857),o=r(25072),c=r(59882),s=(0,n.default)(l.Z).withConfig({displayName:"ResultTablePanel__TableWrapper",componentId:"sc-lhulap-0"})(["max-height:",";overflow-x:hidden;overflow-y:auto;"],(e=>e.$maxHeight)),p=(0,n.default)(c.ZP).withConfig({displayName:"ResultTablePanel__StyledSortableTable",componentId:"sc-lhulap-1"})(["img{width:1.8rem;height:1.8rem;}td{padding-left:0.75rem;}"]);t.Z=e=>{var{data:t,head:r,body:n,sortFunc:l,defaultSortKey:c,maxHeight:m,striped:d,headerEnd:u,helpModal:g}=e,{pageString:f}=(0,i.f)(),{0:h,1:y}=(0,a.useState)(!1);return a.createElement(a.Fragment,null,a.createElement(o.ZP,{title:f.items.drop.filter.resultTitle,withHelp:!0,onClickHelp:()=>y(!0),end:u,border:!0}),a.createElement(s,{$maxHeight:m},a.createElement(p,{data:t,head:r,body:n,sortFunc:l,defaultSortKey:c,striped:d})),g&&a.cloneElement(g,{open:h,onClose:()=>y(!1)}))}},26465:function(e,t,r){r.r(t),r.d(t,{default:function(){return q}});var a=r(45987),n=r(4942),l=r(67294),i=r(50009),o=r(4093),c=r(86300),s=r(99395),p=r(49400),m=r(54480),d=r(42857),u=r(24452),g=r(59882),f=r(25072),h=r(22727),y=r(82195),b=r(93175),E=r(22776),v=r(28437),O=r(96154),S=["materials","trainItems","expPotions"];function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}var j={};O.forEach((e=>{e.stages.forEach((t=>{var{materials:r,trainItems:l,expPotions:i}=t,o=(0,a.Z)(t,S);[r,l,i].forEach((t=>{t.forEach((t=>{var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({chapter:e.chapter,rarity:t.rarity},o);j[t.id]?j[t.id].drop.push(r):j[t.id]={drop:[r]}}))}))}))}));for(var w=1;w<11;w++)j[(500+w).toString()]={drop:[]};for(var k=1;k<3;k++)j[(900+k).toString()]={drop:[]};var Z=j,I=["materials","trainItems","expPotions"];function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var D=e=>{var{filterBtnValue:t,filterBy:r,clearBtnValue:a}=e,{userLanguage:n,pageString:i,itemString:o}=(0,d.f)();return l.createElement(l.Fragment,null,l.createElement(f.ZP,{title:i.items.drop.filter.itemPanelTitle,end:l.createElement(h.Io,{onClick:a,tooltipText:i.items.drop.filter.deleteTooltip},v.pJ),border:!0}),l.createElement(y.Z,{value:t,onChange:r,$lang:n,$type:"ITEM_DROPS_FILTER"},Object.entries(Z).map(((e,t)=>{var[r,a]=e;return 0===a.drop.length?null:l.createElement(T,{value:r,key:t},l.createElement(x,{name:"item_"+r,alt:""}),o.name[r])}))))},T=(0,i.default)(y.C).withConfig({displayName:"filter__StyledToggleButton",componentId:"sc-1e6kgg1-0"})(["display:flex;justify-content:center;align-items:center;font-size:0.85rem;"]),x=(0,i.default)(b.Z).withConfig({displayName:"filter__ItemImg",componentId:"sc-1e6kgg1-1"})(["width:2.26rem;height:2.26rem;"]),B=e=>{var{requestSort:t,getSortDirection:r,data:a}=e,{pageString:n,itemString:i}=(0,d.f)();return 0===a.length?l.createElement(g.Re,null,n.items.drop.filter.tableHead[1]):Object.keys(a[0]).map(((e,a)=>"stage"===e||"energy"===e?null:l.createElement(H,{key:e,onClick:()=>t(e),direction:r(e)},l.createElement(V,{name:"item_"+e,alt:i.name[e]}))))},H=(0,i.default)(g.Re).withConfig({displayName:"filter__ImgTh",componentId:"sc-1e6kgg1-2"})(["&:after{position:absolute;top:calc(50% - 0.75rem);margin-left:2rem;}"]),V=(0,i.default)(b.Z).withConfig({displayName:"filter__TableImg",componentId:"sc-1e6kgg1-3"})(["width:1.8rem;height:1.8rem;"]),F=e=>{var{requestSort:t,getSortDirection:r,sortedData:a}=e,{pageString:n}=(0,d.f)();return l.createElement(o.Z,null,l.createElement(s.Z,null,l.createElement(g.Re,{onClick:()=>t("stage"),direction:r("stage")},n.items.drop.filter.tableHead[0]),l.createElement(B,{requestSort:t,getSortDirection:r,data:a}),l.createElement(H,{onClick:()=>t("energy"),direction:r("energy")},l.createElement(V,{name:"energy",alt:n.items.drop.filter.tableHead[2]}))))},R=e=>{var{sortedData:t}=e,{itemString:r}=(0,d.f)();return l.createElement(c.Z,null,t.map(((e,t)=>l.createElement(s.Z,{hover:!0,key:e.stage},l.createElement(p.Z,null,e.stage),Object.entries(e).map(((e,t)=>{var[a,n]=e;return"stage"===a||"energy"===a?null:l.createElement(p.Z,{key:t},r.rarity[n])})),l.createElement(p.Z,null,e.energy)))))},N=e=>{var{open:t,onClose:r}=e,{pageString:a}=(0,d.f)();return l.createElement(E.p2,{title:a.items.drop.filter.helpModal.title,open:t,onClose:r,content:a.items.drop.filter.helpModal.content,ariaLabelledby:"help-modal-title",ariaDescribedby:"help-modal-description"})},M=e=>{var t=e.split("-");return 1e3*parseInt(t[0])+10*parseInt(t[1].split(" ")[0])+(t[1].includes("free")?1:0)+(t.length>2?parseInt(t[2]):0)},$=(e,t)=>{e.sort(((e,r)=>{var a,n;return"stage"===t.key?(a=M(e.stage),n=M(r.stage)):(a=e[t.key],n=r[t.key]),a<n?"asc"===t.direction?-1:1:a>n?"asc"===t.direction?1:-1:0}))},q=()=>{var{0:e,1:t}=(0,l.useState)({filterBtnValue:[],data:[]}),r=(e,r)=>{if(0!==r.length){var n=[].concat(...O.map((e=>e.stages.map((t=>{var{materials:r,trainItems:n,expPotions:l}=t;return _(_({},(0,a.Z)(t,I)),{},{drops:r.concat(n,l),chapter:e.chapter})}))))).filter((e=>r.every((t=>{var r=!1;return e.drops.forEach((e=>{if(e.id===t)return r=!0,!1})),r}))));n=n.map((e=>{var t={stage:e.chapter+"-"+e.stage,energy:e.energy};return e.drops.forEach((e=>{r.includes(e.id)&&(t[e.id]=e.rarity)})),t})),t((e=>_(_({},e),{},{filterBtnValue:r,data:n})))}else t((e=>_(_({},e),{},{filterBtnValue:r,data:[]})))};return l.createElement(l.Fragment,null,l.createElement(m.Z,{panelsWidth:["62%","38%"]},l.createElement(D,{filterBtnValue:e.filterBtnValue,filterBy:r,clearBtnValue:e=>r(0,[])}),l.createElement(u.Z,{data:e.data,head:l.createElement(F,null),body:l.createElement(R,null),sortFunc:$,defaultSortKey:e.filterBtnValue[0],maxHeight:"calc(100vh - 16rem)",striped:!0,helpModal:l.createElement(N,null)})))}}}]);
//# sourceMappingURL=component---src-pages-items-drop-filter-js-b47698fad3a72c157a53.js.map