(self.webpackChunktkfmtools=self.webpackChunktkfmtools||[]).push([[781],{6479:function(e,t,n){var a=n(37316);e.exports=function(e,t){if(null==e)return{};var n,r,i=a(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i},e.exports.default=e.exports,e.exports.__esModule=!0},50033:function(e,t,n){"use strict";var a=n(50009).default.div.withConfig({displayName:"Scrollable",componentId:"sc-1ueymsi-0"})(["overflow:auto;height:100%;scrollbar-width:thin;padding-right:0.5rem;margin-right:-0.5rem;&::-webkit-scrollbar{width:0.4rem;height:0.4rem;background:",";}&::-webkit-scrollbar-thumb{background:",";border-radius:0.25rem;}&::-webkit-scrollbar-track{background:",";}&::-webkit-scrollbar-corner{background:",";}"],(e=>e.theme.colors.surface),(e=>e.theme.colors.border),(e=>e.theme.colors.surface),(e=>e.theme.colors.surface));t.Z=a},18572:function(e,t,n){var a=n(6479),r=["id"],i=n(5102).reduce(((e,t)=>{var{id:n}=t,i=a(t,r);return e[n]=i,e}),{});e.exports=i},37245:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return I}});var a=n(4942),r=n(67294),i=n(50009),o=n(83332),l=n(80838),p=n(1446),s=n(29748),d=n(42857),u=n(93175),c=n(50190),m=n(60773),f=n(25072),b=n(22727),A=n(28437),y=n(79520),h=n(22776),E=n(59969),g=n.n(E),k=n(5102).reduce(((e,t,n)=>(e[t.tags.position-5].push({id:t.id,ind:n}),e)),[...Array(5)].map((e=>[])));function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var H=e=>{var{index:t}=e,{pageString:n,charString:a}=(0,d.f)(),{currentLineup:i,actions:o}=(0,s.H)(),{setCurrentLineup:l}=o,u=i[t],c=(0,r.useCallback)((e=>{var n=Array.from(i);n[t]=C(C(C({},e),g()(e)),{},{owned:0!==e.level}),l(n)}),[i[t],l]),{selectItems:f,setSelect:b,setCharState:A}=(0,p.Z)(u,c);(0,r.useEffect)((()=>{A(u)}),[u]);var y=(0,r.useCallback)((()=>{var e=Array.from(i);e[t].owned=!e[t].owned,l(e)}),[i[t],l]),h=(0,r.useCallback)((e=>t=>{b(e,parseInt(t.target.value))}),[b]),E=(0,r.useCallback)((e=>()=>{b("potentialSub",e)}),[b]);return r.createElement(w,{item:!0,xs:10,sm:6,md:5,lg:4},r.createElement(S,{onClick:y,$owned:u.owned,disableRipple:!0,disableFocusRipple:!0},r.createElement(B,{name:"char_small_"+u.id,alt:a.name[u.id]})),r.createElement(O,{container:!0,spacing:1},r.createElement(J,{item:!0,xs:6},r.createElement(_,{label:n.analysis.index.levelTitle,value:u.level,onChange:h("level"),disabled:!u.owned,variant:"outlined",size:"small",margin:"dense"})),r.createElement(J,{item:!0,xs:6},r.createElement(D,{label:n.analysis.index.disciplineTitle,values:f.discipline.values,value:"4"===u.id[0]?"-":u.discipline,onChange:h("discipline"),disabled:!u.owned||"4"===u.id[0],margin:"dense"})),r.createElement(J,{item:!0,xs:6},r.createElement(D,{label:n.analysis.index.starTitle,values:f.star.values,value:u.star,onChange:h("star"),disabled:!u.owned,margin:"dense"})),r.createElement(J,{item:!0,xs:6},r.createElement(m.Z,{charId:u.id,label:n.analysis.index.potentialTitle,values:f.potential.values,mainValue:u.potential,subValue:u.potentialSub,onMainChange:h("potential"),onSubChange:E,disabled:!u.owned,margin:"dense"}))))},w=(0,i.default)(l.Z).withConfig({displayName:"analysis__StyledCharContainer",componentId:"sc-3odedp-0"})(["display:flex;flex-direction:row;margin-bottom:2rem;margin-right:2rem;&&{max-width:30rem;}"]),S=(0,i.default)(o.Z).withConfig({displayName:"analysis__CharImgWrapper",componentId:"sc-3odedp-1"})([""," &&{transition:filter 0.1s ease;}"],(e=>e.$owned?null:"filter: grayscale(100%);")),B=(0,i.default)(u.Z).withConfig({displayName:"analysis__CharImg",componentId:"sc-3odedp-2"})(["width:7rem;height:7rem;"]),_=(0,i.default)(c.Z).withConfig({displayName:"analysis__LevelInput",componentId:"sc-3odedp-3"})(["&&{input{padding:0.6rem 1rem;}color:",";}"],(e=>e.disabled?e.theme.colors.dropdownHover:"inherit")),D=(0,i.default)(c.P).withConfig({displayName:"analysis__StyledSelect",componentId:"sc-3odedp-4"})(["&&{width:100%;> div > div{padding:0.6rem 1rem;padding-right:2rem;color:",";}svg{fill:",";}}"],(e=>e.disabled?e.theme.colors.dropdownHover:"inherit"),(e=>e.disabled?e.theme.colors.dropdownHover:e.theme.colors.onSurface)),O=(0,i.default)(l.Z).withConfig({displayName:"analysis__SelectGrid",componentId:"sc-3odedp-5"})(["align-content:center;"]),J=(0,i.default)(l.Z).withConfig({displayName:"analysis__SelectWrapper",componentId:"sc-3odedp-6"})(["height:40%;"]),N=e=>{var{dispatch:t,handleData:n}=e,{pageString:a}=(0,d.f)();return r.createElement(L,null,r.createElement(b.ZP,{onClick:()=>n("SAVE_DATA"),tooltipText:a.analysis.index.saveButton},A.N),r.createElement(b.ZP,{onClick:()=>t({type:"HANDLE_DATA_MODAL",open:!0}),tooltipText:a.analysis.index.loadButton},A.Tl))},L=i.default.div.withConfig({displayName:"analysis__DataButtonContainer",componentId:"sc-3odedp-7"})(["position:absolute;right:0;top:-4rem;margin-bottom:0;> span:last-child button{margin:0;}"]),P=e=>{var{handleData:t}=e,{pageString:n}=(0,d.f)(),{localLineups:a}=(0,s.H)();return a&&a.map(((e,a)=>r.createElement(f.ZP,{title:e.date,end:r.createElement(r.Fragment,null,r.createElement(b.ZP,{onClick:()=>t("LOAD_DATA",a),tooltipText:n.analysis.index.loadButton},A.Tl),r.createElement(b.ZP,{onClick:()=>t("DELETE_DATA",a),tooltipText:n.analysis.index.deleteButton},A.pJ)),key:a})))},x=["attacker","defender","healer","obsructer","supporter"],M=(e,t)=>{switch(t.type){case"HANDLE_SUCCESS_SNACKBAR":return C(C({},e),{},{isSuccessSnackbarOpen:t.open});case"HANDLE_ERROR_SNACKBAR":return C(C({},e),{},{isErrorSnackbarOpen:t.open});case"HANDLE_DATA_MODAL":return C(C({},e),{},{isDataModalOpen:t.open});case"HANDLE_HELP_MODAL":return C(C({},e),{},{isHelpModalOpen:t.open});default:throw new Error("Unknown action type: "+t.type)}},T=i.default.div.withConfig({displayName:"analysis__CharGroupsContainer",componentId:"sc-3odedp-8"})(["width:100%;> div:nth-child(even) > div > span{display:flex;align-items:center;margin-bottom:0.4rem;}> div:nth-child(2) > div{width:100%;justify-content:space-between;}"]),K=(0,i.default)(u.Z).withConfig({displayName:"analysis__PositionImgWrapper",componentId:"sc-3odedp-9"})(["width:2rem;margin-right:0.2rem;"]),I=()=>{var{pageString:e,charString:t}=(0,d.f)(),{currentLineup:n,actions:a}=(0,s.H)(),{pushLineup:i,getLineup:o,deleteLineup:p,setCurrentLineup:u}=a,{0:c,1:m}=(0,r.useReducer)(M,{isDataModalOpen:!1,isHelpModalOpen:!1,isSuccessSnackbarOpen:!1,isErrorSnackbarOpen:!1}),b=(0,r.useCallback)(((e,t)=>{switch(e){case"SAVE_DATA":if(i(n,{firebase:!0}))return void m({type:"HANDLE_SUCCESS_SNACKBAR",open:!0});break;case"LOAD_DATA":var a=o(t);if(a)return u(a),m({type:"HANDLE_SUCCESS_SNACKBAR",open:!0}),void m({type:"HANDLE_DATA_MODAL",open:!1});break;case"DELETE_DATA":return p(t)?void m({type:"HANDLE_SUCCESS_SNACKBAR",open:!0}):void 0;default:throw new Error("Unknown action type: "+e)}m({type:"HANDLE_ERROR_SNACKBAR",open:!0})}),[n,u,o,i,p]);return r.createElement(T,null,r.createElement(N,{dispatch:m,handleData:b}),k.map(((e,n)=>r.createElement(r.Fragment,{key:n},r.createElement(f.ZP,{title:t.tags[n+5],titleIcon:r.createElement(K,{name:"ui_"+x[n],alt:""}),withHelp:0===n,onClickHelp:()=>m({type:"HANDLE_HELP_MODAL",open:!0}),border:!0}),r.createElement(l.Z,{container:!0,spacing:2},e.map((e=>r.createElement(H,{index:e.ind,key:e.id}))))))),r.createElement(y.Z,{open:c.isSuccessSnackbarOpen,onClose:()=>m({type:"HANDLE_SUCCESS_SNACKBAR",open:!1}),message:e.analysis.index.successMsg,type:"success"}),r.createElement(y.Z,{open:c.isErrorSnackbarOpen,onClose:()=>m({type:"HANDLE_ERROR_SNACKBAR",open:!1}),message:e.analysis.index.errorMsg,type:"error"}),r.createElement(h.WQ,{title:e.analysis.index.modalTitle,open:c.isDataModalOpen,onClose:()=>m({type:"HANDLE_DATA_MODAL",open:!1}),ariaLabelledby:"data-operation-modal-title",ariaDescribedby:"data-operation-modal-description"},r.createElement(P,{handleData:b})),r.createElement(h.p2,{title:e.analysis.index.helpModal.title,content:e.analysis.index.helpModal.content,open:c.isHelpModalOpen,onClose:()=>m({type:"HANDLE_HELP_MODAL",open:!1}),ariaLabelledby:"help-modal-title",ariaDescribedby:"help-modal-description"}))}},59969:function(e,t,n){var a=n(5102),r=n(8223),i=(e,t,n,i)=>{var o={items:{},money:0,buff:{ATK:0,HP:0,PASSIVE:0}};if(t[0]>n[0])return o;for(var l="nr"===e||"4"===e[0]||"3"===e[0]?3:void 0!==i?i:a.find((t=>t.id===e)).potentialType,p=r.type[l],s=t[0]-1;s<n[0]-1+1;s++)for(var d=p[s],u=s===t[0]-1?t[1]-1:0;u<(s===n[0]-1?n[1]:6);u++)if(!(u<0)){var c=d.pattern[u]+d.rank[u];o.items[c]?o.items[c]+=d.num[u]:o.items[c]=d.num[u],o.money+=8e3*(s+1);var m=r.itemMap[d.pattern[u]].type;o.buff[m]+=d.buff[u]}var f={},b=function(e,t){var n=r.itemMap[e[0]].id.map((t=>"9"===e[1]?"902":"8"===e[1]?"901":(100*parseInt(e[1])+t).toString()));for(var a of n)f[a]?f[a]+=t:f[a]=t};for(var[A,y]of Object.entries(o.items))b(A,y);return o.items=f,o};e.exports=e=>{var{id:t,level:n,potential:r,potentialSub:o,discipline:l,star:p}=e,s=a.find((e=>e.id===t));if(!s)throw new Error("invalid character id: "+t);if(("3"===t[0]||"4"===t[0])&&r>6)throw new Error("invalid potential: "+r);if("4"===t[0]&&+l>0)throw new Error("invalid discipline: "+l);var{initATK:d,initHP:u}=s.stats,c=1.1**(n-1),m=o;"object"!=typeof o&&(m=[...Array(6).keys()].map((e=>e<o)));var f=m.reduce(((e,n,a)=>{if(n){var o=i(t,[r,a+1],[r,a+1]).buff;e.ATK+=o.ATK,e.HP+=o.HP}return e}),i(t,[1,0],[r-1,6]).buff),b=1+(isNaN(parseInt(l))?0:+l*(+l+1)*.025),A=(p+5)/(9-t[0]);return{ATK:Math.floor(d*c*(1+f.ATK/100)*b*A),HP:Math.floor(u*c*(1+f.HP/100)*b*A)}},e.exports.calcCharPotential=i},8223:function(e){"use strict";e.exports=JSON.parse('{"type":[[{"pattern":["B","B","J","J","J","J"],"num":[1,2,2,2,2,1],"rank":[1,1,1,1,1,1],"buff":[2,2,3,3,3,3]},{"pattern":["B","B","J","J","J","J"],"num":[2,2,2,3,2,3],"rank":[1,1,1,1,1,1],"buff":[2,2,3.5,3.5,3.5,3.5]},{"pattern":["B","B","B","B","J","J"],"num":[1,1,1,1,2,2],"rank":[2,2,2,2,2,2],"buff":[2,2,2,2,3.5,3.5]},{"pattern":["B","B","B","J","J","J"],"num":[2,1,1,3,3,3],"rank":[2,2,2,2,2,2],"buff":[2,2,2,3.5,3.5,3.5]},{"pattern":["B","B","B","J","J","J"],"num":[1,1,2,4,4,4],"rank":[3,2,2,2,2,2],"buff":[2,2,2,3.5,3.5,3.5]},{"pattern":["P","B","B","B","J","J"],"num":[1,2,1,2,4,4],"rank":[9,3,3,3,3,3],"buff":[1,2,2,2,3.5,3.5]},{"pattern":["B","B","B","B","J","J"],"num":[2,3,2,2,4,4],"rank":[3,3,3,3,3,3],"buff":[2.5,2.5,2.5,2.5,3.5,3.5]},{"pattern":["B","B","B","B","J","J"],"num":[2,2,3,2,4,4],"rank":[3,3,3,3,3,3],"buff":[2.5,2.5,2.5,2.5,3.5,3.5]},{"pattern":["E","E","E","E","M","M"],"num":[2,3,3,2,5,5],"rank":[4,4,4,4,4,4],"buff":[2.5,2.5,2.5,2.5,3.5,3.5]},{"pattern":["G","G","G","G","N","N"],"num":[3,2,2,3,6,6],"rank":[4,4,4,4,4,4],"buff":[3,3,3,3,3.5,3.5]},{"pattern":["E","E","E","E","M","M"],"num":[1,1,1,1,1,1],"rank":[5,5,5,5,5,5],"buff":[3,3,3,3,3.5,3.5]},{"pattern":["P","G","G","G","G","N"],"num":[2,1,1,1,1,1],"rank":[9,5,5,5,5,5],"buff":[2,3,3,3,3,4]}],[{"pattern":["J","J","B","B","B","B"],"num":[1,2,2,2,2,1],"rank":[1,1,1,1,1,1],"buff":[2,2,3,3,3,3]},{"pattern":["J","J","B","B","B","B"],"num":[2,2,2,3,2,3],"rank":[1,1,1,1,1,1],"buff":[2,2,3.5,3.5,3.5,3.5]},{"pattern":["J","J","J","J","B","B"],"num":[1,1,1,1,2,2],"rank":[2,2,2,2,2,2],"buff":[2,2,2,2,3.5,3.5]},{"pattern":["J","J","J","B","B","B"],"num":[2,1,1,3,3,3],"rank":[2,2,2,2,2,2],"buff":[2,2,2,3.5,3.5,3.5]},{"pattern":["J","J","J","B","B","B"],"num":[1,1,2,4,4,4],"rank":[3,2,2,2,2,2],"buff":[2,2,2,3.5,3.5,3.5]},{"pattern":["P","J","J","J","B","B"],"num":[1,2,1,2,4,4],"rank":[9,3,3,3,3,3],"buff":[1,2,2,2,3.5,3.5]},{"pattern":["J","J","J","J","B","B"],"num":[2,3,2,2,4,4],"rank":[3,3,3,3,3,3],"buff":[2.5,2.5,2.5,2.5,3.5,3.5]},{"pattern":["J","J","J","J","B","B"],"num":[2,2,3,2,4,4],"rank":[3,3,3,3,3,3],"buff":[2.5,2.5,2.5,2.5,3.5,3.5]},{"pattern":["M","M","M","M","E","E"],"num":[2,3,3,2,5,5],"rank":[4,4,4,4,4,4],"buff":[2.5,2.5,2.5,2.5,3.5,3.5]},{"pattern":["N","N","N","N","G","G"],"num":[3,2,2,3,6,6],"rank":[4,4,4,4,4,4],"buff":[3,3,3,3,3.5,3.5]},{"pattern":["M","M","M","M","E","E"],"num":[1,1,1,1,1,1],"rank":[5,5,5,5,5,5],"buff":[3,3,3,3,3.5,3.5]},{"pattern":["P","N","N","N","N","G"],"num":[2,1,1,1,1,1],"rank":[9,5,5,5,5,5],"buff":[2,3,3,3,3,4]}],[{"pattern":["A","A","A","A","A","A"],"num":[2,2,2,2,2,2],"rank":[1,1,1,1,1,1],"buff":[2.75,2.75,2.75,2.75,2.75,2.75]},{"pattern":["H","H","H","H","H","H"],"num":[2,2,2,2,2,2],"rank":[1,1,1,1,1,1],"buff":[2.75,2.75,2.75,2.75,2.75,2.75]},{"pattern":["A","H","A","H","A","H"],"num":[3,2,1,1,1,1],"rank":[2,2,2,2,2,2],"buff":[2.75,2.75,2.75,2.75,2.75,2.75]},{"pattern":["H","A","A","A","A","A"],"num":[3,3,3,2,2,2],"rank":[2,2,2,2,2,2],"buff":[2.75,2.75,2.75,2.75,2.75,2.75]},{"pattern":["C","H","H","H","H","H"],"num":[3,3,3,2,2,2],"rank":[3,2,2,2,2,2],"buff":[2.75,2.75,2.75,2.75,2.75,2.75]},{"pattern":["P","K","C","K","C","K"],"num":[1,3,2,2,2,2],"rank":[9,3,3,3,3,3],"buff":[1,2.75,2.75,2.75,2.75,2.75]},{"pattern":["C","K","C","K","C","K"],"num":[2,2,3,3,3,3],"rank":[3,3,3,3,3,3],"buff":[2.75,2.75,2.75,2.75,2.75,3]},{"pattern":["C","K","C","K","C","K"],"num":[3,3,3,3,3,3],"rank":[3,3,3,3,3,3],"buff":[3,3,3,3,3,3]},{"pattern":["D","L","D","L","D","L"],"num":[4,4,3,3,3,3],"rank":[4,4,4,4,4,4],"buff":[3,3,3,3,3,3]},{"pattern":["F","O","F","O","F","O"],"num":[4,4,4,4,3,3],"rank":[4,4,4,4,4,4],"buff":[3,3,3,3,3,3]},{"pattern":["D","L","D","L","D","L"],"num":[1,1,1,1,1,1],"rank":[5,5,5,5,5,5],"buff":[3,3,3,3,3,3]},{"pattern":["P","F","F","O","F","O"],"num":[2,1,1,1,1,1],"rank":[9,5,5,5,5,5],"buff":[2,3,3,3,3,3]}],[{"pattern":["A","A","A","A","A","A"],"num":[2,2,2,2,2,2],"rank":[1,1,1,1,1,1],"buff":[2.75,2.75,2.75,2.75,3,3]},{"pattern":["H","H","H","H","H","H"],"num":[2,2,2,2,2,2],"rank":[1,1,1,1,1,1],"buff":[2.75,2.75,2.75,2.75,3,3]},{"pattern":["P","H","A","H","A","H"],"num":[5,2,1,1,1,1],"rank":[8,2,2,2,2,2],"buff":[1,3,3,3,3,3]},{"pattern":["A","A","A","A","A","A"],"num":[3,3,3,2,2,2],"rank":[2,2,2,2,2,2],"buff":[3,3,3,3,3,3]},{"pattern":["H","H","H","H","H","H"],"num":[3,3,3,2,2,2],"rank":[2,2,2,2,2,2],"buff":[3,3,3,3,3,3]},{"pattern":["P","C","K","C","K","C"],"num":[10,3,3,2,2,2],"rank":[8,3,3,3,3,3],"buff":[2,3,3,3,3,3]}]],"itemMap":{"A":{"id":[1,3],"type":"ATK"},"B":{"id":[1,5],"type":"ATK"},"C":{"id":[3,5],"type":"ATK"},"D":{"id":[1,3],"type":"ATK"},"E":{"id":[1,5],"type":"ATK"},"F":{"id":[8,10],"type":"ATK"},"G":{"id":[6,10],"type":"ATK"},"H":{"id":[2,3],"type":"HP"},"J":{"id":[2,4],"type":"HP"},"K":{"id":[3,4],"type":"HP"},"L":{"id":[2,3],"type":"HP"},"M":{"id":[2,4],"type":"HP"},"N":{"id":[7,9],"type":"HP"},"O":{"id":[8,9],"type":"HP"},"P":{"id":[1],"type":"PASSIVE"}}}')}}]);
//# sourceMappingURL=component---src-pages-analysis-index-js-462a3f10d024a10c6bca.js.map