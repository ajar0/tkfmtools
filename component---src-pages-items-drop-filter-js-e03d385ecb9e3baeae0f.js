"use strict";(self.webpackChunktkfmtools=self.webpackChunktkfmtools||[]).push([[302],{22776:function(e,t,r){r.d(t,{WQ:function(){return g},p2:function(){return y}});var a=r(67294),n=r(80366),l=r(6400),o=r(62764),i=r(8290),c=r(50033),d=r(25072),s=e=>{var{children:t,className:r,title:n,open:c,onClose:d,keepMounted:s,ariaLabelledby:g,ariaDescribedby:f}=e;return a.createElement(l.Z,{className:r,open:c,onClose:d,closeAfterTransition:!0,BackdropComponent:o.Z,BackdropProps:{timeout:500},disableEnforceFocus:!0,keepMounted:s,"aria-labelledby":g,"aria-describedby":f},a.createElement(i.Z,{in:c},a.createElement(m,null,a.createElement(p,{title:n,id:g,end:a.createElement(u,{onClick:d},"Ã—")}),t)))},m=n.default.div.withConfig({displayName:"Modal__ModalContentWrapper",componentId:"sc-o6bkb-0"})(["position:absolute;top:10%;bottom:auto;left:0;right:0;width:70%;@media screen and (max-width:1000px){width:80%;}@media screen and (max-width:768px){width:90%;}height:auto;margin:auto;padding:1rem;background-color:",";color:",";border-radius:0.25rem;border:1px solid ",";"],(e=>{var{theme:t}=e;return t.colors.surface}),(e=>{var{theme:t}=e;return t.colors.onSurface}),(e=>{var{theme:t}=e;return t.colors.border})),p=(0,n.default)(d.Z).withConfig({displayName:"Modal__ModalHeader",componentId:"sc-o6bkb-1"})(["margin:-1rem;margin-bottom:1rem;padding:0.2rem 0.5rem;color:",";background-color:",";"],(e=>{var{theme:t}=e;return t.colors.onSecondary}),(e=>{var{theme:t}=e;return t.colors.secondary})),u=n.default.span.withConfig({displayName:"Modal__CloseWrapper",componentId:"sc-o6bkb-2"})(["cursor:pointer;font-size:x-large;"]),g=e=>{var{children:t,className:r,title:n,open:l,onClose:o,keepMounted:i,ariaLabelledby:d,ariaDescribedby:s}=e;return a.createElement(f,{className:r,title:n,open:l,onClose:o,keepMounted:i,ariaLabelledby:d,ariaDescribedby:s},a.createElement(c.Z,null,t))},f=(0,n.default)(s).withConfig({displayName:"Modal__StyledScrollableModal",componentId:"sc-o6bkb-3"})(["> div:nth-child(3) > div{max-height:calc(80vh - 2rem);}"]),b=e=>{var{content:t,ariaDescribedby:r}=e;return t.map(((e,t)=>a.createElement(a.Fragment,{key:t},a.createElement(d.Z,{title:e.title,border:!0}),a.createElement(h,null,e.content.map(((e,t)=>a.createElement("p",{key:t,id:r+"_"+t},e)))))))},h=n.default.div.withConfig({displayName:"Modal__ModalBody",componentId:"sc-o6bkb-4"})(["margin:1rem 0;"]),y=e=>{var{title:t,content:r,open:n,onClose:l,ariaLabelledby:o,ariaDescribedby:i}=e;return a.createElement(g,{title:t,open:n,onClose:l,ariaLabelledby:o,ariaDescribedby:[...Array(r.length).keys()].map((e=>i+"_"+e)).join(" ")},a.createElement(b,{content:r,ariaDescribedby:i}))};t.ZP=s},24452:function(e,t,r){var a=r(67294),n=r(80366),l=r(50033),o=r(42857),i=r(25072),c=r(59882),d=(0,n.default)(l.Z).withConfig({displayName:"ResultTablePanel__TableWrapper",componentId:"sc-lhulap-0"})(["max-height:",";overflow-x:hidden;overflow-y:auto;"],(e=>e.$maxHeight)),s=(0,n.default)(c.ZP).withConfig({displayName:"ResultTablePanel__StyledSortableTable",componentId:"sc-lhulap-1"})(["img{width:1.8rem;height:1.8rem;}td{padding-left:0.75rem;}"]);t.Z=e=>{var{data:t,head:r,body:n,sortFunc:l,defaultSortKey:c,maxHeight:m,striped:p,headerEnd:u,helpModal:g}=e,{pageString:f}=(0,o.f)(),{0:b,1:h}=(0,a.useState)(!1);return a.createElement(a.Fragment,null,a.createElement(i.Z,{title:f.items.drop.filter.resultTitle,withHelp:!0,onClickHelp:()=>h(!0),end:u,border:!0}),a.createElement(d,{$maxHeight:m},a.createElement(s,{data:t,head:r,body:n,sortFunc:l,defaultSortKey:c,striped:p})),g&&a.cloneElement(g,{open:b,onClose:()=>h(!1)}))}},26465:function(e,t,r){r.r(t),r.d(t,{default:function(){return W}});var a=r(45987),n=r(4942),l=r(67294),o=r(80366),i=r(17708),c=r(33182),d=r(57783),s=r(70943),m=r(54480),p=r(42857),u=r(24452),g=r(59882),f=r(25072),b=r(24069),h=r(40122),y=r(93175),E=r(22776),v=r(28437),k=r(96154),O=["materials","trainItems","expPotions"];function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}var C={};k.forEach((e=>{e.stages.forEach((t=>{var{materials:r,trainItems:l,expPotions:o}=t,i=(0,a.Z)(t,O);[r,l,o].forEach((t=>{t.forEach((t=>{var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({chapter:e.chapter,rarity:t.rarity},i);C[t.id]?C[t.id].drop.push(r):C[t.id]={drop:[r]}}))}))}))}));for(var S=1;S<11;S++)C[(500+S).toString()]={drop:[]};for(var Z=1;Z<3;Z++)C[(900+Z).toString()]={drop:[]};var _=C,j=["materials","trainItems","expPotions"];function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var D=e=>{var{filterBtnValue:t,filterBy:r,clearBtnValue:a}=e,{userLanguage:n,pageString:o,itemString:i}=(0,p.f)();return l.createElement(l.Fragment,null,l.createElement(f.Z,{title:o.items.drop.filter.itemPanelTitle,end:l.createElement(b.Io,{onClick:a,tooltipText:o.items.drop.filter.deleteTooltip},v.pJ),border:!0}),l.createElement(h.Z,{value:t,onChange:r,$lang:n,$type:"ITEM_DROPS_FILTER"},Object.entries(_).map(((e,t)=>{var[r,a]=e;return 0===a.drop.length?null:l.createElement(x,{value:r,key:t},l.createElement(M,{name:"item_"+r,alt:""}),i.name[r])}))))},x=(0,o.default)(h.C).withConfig({displayName:"filter__StyledToggleButton",componentId:"sc-1e6kgg1-0"})(["display:flex;justify-content:center;align-items:center;font-size:0.85rem;"]),M=(0,o.default)(y.Z).withConfig({displayName:"filter__ItemImg",componentId:"sc-1e6kgg1-1"})(["width:2.26rem;height:2.26rem;"]),B=e=>{var{requestSort:t,getSortDirection:r,data:a}=e,{pageString:n,itemString:o}=(0,p.f)();return 0===a.length?l.createElement(g.Re,null,n.items.drop.filter.tableHead[1]):Object.keys(a[0]).map(((e,a)=>"stage"===e||"energy"===e?null:l.createElement(N,{key:e,onClick:()=>t(e),direction:r(e)},l.createElement(T,{name:"item_"+e,alt:o.name[e]}))))},N=(0,o.default)(g.Re).withConfig({displayName:"filter__ImgTh",componentId:"sc-1e6kgg1-2"})(["&:after{position:absolute;top:calc(50% - 0.75rem);margin-left:2rem;}"]),T=(0,o.default)(y.Z).withConfig({displayName:"filter__TableImg",componentId:"sc-1e6kgg1-3"})(["width:1.8rem;height:1.8rem;"]),H=e=>{var{requestSort:t,getSortDirection:r,sortedData:a}=e,{pageString:n}=(0,p.f)();return l.createElement(i.Z,null,l.createElement(c.Z,null,l.createElement(g.Re,{onClick:()=>t("stage"),direction:r("stage")},n.items.drop.filter.tableHead[0]),l.createElement(B,{requestSort:t,getSortDirection:r,data:a}),l.createElement(N,{onClick:()=>t("energy"),direction:r("energy")},l.createElement(T,{name:"energy",alt:n.items.drop.filter.tableHead[2]}))))},F=e=>{var{sortedData:t}=e,{itemString:r}=(0,p.f)();return l.createElement(d.Z,null,t.map(((e,t)=>l.createElement(c.Z,{hover:!0,key:e.stage},l.createElement(s.Z,null,e.stage),Object.entries(e).map(((e,t)=>{var[a,n]=e;return"stage"===a||"energy"===a?null:l.createElement(s.Z,{key:t},r.rarity[n])})),l.createElement(s.Z,null,e.energy)))))},V=e=>{var{open:t,onClose:r}=e,{pageString:a}=(0,p.f)();return l.createElement(E.p2,{title:a.items.drop.filter.helpModal.title,open:t,onClose:r,content:a.items.drop.filter.helpModal.content,ariaLabelledby:"help-modal-title",ariaDescribedby:"help-modal-description"})},L=e=>{var t=e.split("-");return 1e3*parseInt(t[0])+10*parseInt(t[1].split(" ")[0])+(t[1].includes("free")?1:0)+(t.length>2?parseInt(t[2]):0)},R=(e,t)=>{e.sort(((e,r)=>{var a,n;return"stage"===t.key?(a=L(e.stage),n=L(r.stage)):(a=e[t.key],n=r[t.key]),a<n?"asc"===t.direction?-1:1:a>n?"asc"===t.direction?1:-1:0}))},W=()=>{var{0:e,1:t}=(0,l.useState)({filterBtnValue:[],data:[]}),r=(e,r)=>{if(0!==r.length){var n=[].concat(...k.map((e=>e.stages.map((t=>{var{materials:r,trainItems:n,expPotions:l}=t;return I(I({},(0,a.Z)(t,j)),{},{drops:r.concat(n,l),chapter:e.chapter})}))))).filter((e=>r.every((t=>{var r=!1;return e.drops.forEach((e=>{if(e.id===t)return r=!0,!1})),r}))));n=n.map((e=>{var t={stage:e.chapter+"-"+e.stage,energy:e.energy};return e.drops.forEach((e=>{r.includes(e.id)&&(t[e.id]=e.rarity)})),t})),t((e=>I(I({},e),{},{filterBtnValue:r,data:n})))}else t((e=>I(I({},e),{},{filterBtnValue:r,data:[]})))};return l.createElement(l.Fragment,null,l.createElement(m.Z,{panelsWidth:["62%","38%"]},l.createElement(D,{filterBtnValue:e.filterBtnValue,filterBy:r,clearBtnValue:e=>r(0,[])}),l.createElement(u.Z,{data:e.data,head:l.createElement(H,null),body:l.createElement(F,null),sortFunc:R,defaultSortKey:e.filterBtnValue[0],maxHeight:"calc(100vh - 16rem)",striped:!0,helpModal:l.createElement(V,null)})))}}}]);
//# sourceMappingURL=component---src-pages-items-drop-filter-js-e03d385ecb9e3baeae0f.js.map